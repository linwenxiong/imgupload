<!-- <!DOCTYPE html>
<html>
<head>
	<title>dobss</title>
	<script type="text/javascript" src="/jquery.min.js"></script>
</head>
<style type="text/css">
	*{
		margin: 0;
		padding: 0;
		line-height: 1;
	}
 	div{
        position: absolute;
        left: 100px;
        top: 100px;
        width: 45px;
        height: 45px;
        background: #369
    }
</style>
<body>
 
	<div>
		
	</div>


<script type="text/javascript">
window.onload = function(){
    var oDiv = document.getElementsByTagName("div")[0];

    /*鼠标点击的位置距离DIV左边的距离 */
    var disX = 0;
    /*鼠标点击的位置距离DIV顶部的距离*/
    var disY = 0;
    oDiv.touchstart = function(){
        var e = e || window.event;
        disX = e.clientX - oDiv.offsetLeft;
        disY = e.clientY- oDiv.offsetTop;
        console.log("disX:",disX,"disY:",disY,"e.clientX",e.clientX,"e.clientY",e.clientY,"oDiv.offsetLeft",oDiv.offsetLeft,"oDiv.offsetTop",oDiv.offsetTop);
        document.touchmove = function(e){
            var e = e || window.event;
            // // 横轴坐标
            var leftX = e.clientX - disX;

            // // 纵轴坐标
             var topY = e.clientY - disY;

            if( leftX < 0 ){
                leftX = 0;
            }
            /* 获取浏览器视口大小 document.document.documentElement.clientWidth*/
            else if(  leftX > document.documentElement.clientWidth - oDiv.offsetWidth ){
                leftX = document.document.documentElement.clientWidth - oDiv.offsetWidth;
            }

            if( topY < 0 ){
                topY = 0;
            }
            else if( topY > document.documentElement.clientHeight -oDiv.offsetHeight ){
                topY = document.documentElement.clientHeight - oDiv.offsetHeight;
            }
            oDiv.style.left = leftX + "px";
            oDiv.style.top = topY+"px";
        }
        document.touchend = function(){
            document.onmousemove = null;
            document.onmouseup = null;
        }
    }
 }

</script>
</body>

</html>




  -->


<!DOCTYPE html>
<html lang="en">
<head>
	 <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0">
    <meta charset="UTF-8">
    <title>适配移动端的拖动效果</title>
    <style>
   
        #div2{
            position: absolute;
            top:0;
            left:0;
            width: 100px;
            height: 100px;
            background: #bbbbbb;
        }
    </style>
</head>
<body>
<div id="div1">
    <div id="div2"></div>
</div>
<script>
    var flag = false;
    var cur = {
        x:0,
        y:0
    }
    var nx,ny,dx,dy,x,y ;
    function down(){
        flag = true;
        var touch ;
        if(event.touches){
            touch = event.touches[0];
        }else {
            touch = event;
        }
        cur.x = touch.clientX;
        cur.y = touch.clientY;
        dx = div2.offsetLeft;
        dy = div2.offsetTop;
    }
    function move(){
        if(flag){
            var touch ;
            if(event.touches){
                touch = event.touches[0];
            }else {
                touch = event;
            }
            nx = touch.clientX - cur.x;
            ny = touch.clientY - cur.y;
            x = dx+nx;
            y = dy+ny;
            div2.style.left = x+"px";
            div2.style.top = y +"px";
           
        }
    }
    //鼠标释放时候的函数
    function end(){
        flag = false;
    }

    
    var div2 = document.getElementById("div2");
    // div2.addEventListener("mousedown",function(){
    //     down();
    // },false);
    div2.addEventListener("touchstart",function(){
        down();
    },false)
    // div2.addEventListener("mousemove",function(){
    //     move();
    // },false);
    div2.addEventListener("touchmove",function(){
        move();
    },false)
    // document.body.addEventListener("mouseup",function(){
    //     end();
    // },false);
    div2.addEventListener("touchend",function(){
        end();
    },false);








function abc(){

    function a(){
        alert(44444)
    }
    function b(){
        alert(33333)
    }
}
abc();









</script>
</body>
</html>  